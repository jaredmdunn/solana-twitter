{"version":3,"sources":["webpack:///./src/tweets.js","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?f63c"],"names":["preflightCommitment","commitment","fetchTweets","async","program","useWorkspace","tweets","value","account","tweet","all","sendTweet","topic","content","wallet","web3","Keypair","generate","methods","accounts","author","publicKey","systemProgram","SystemProgram","programId","signers","rpc","tweetAccount","fetch","ref","loading","then","fetchedTweets","finally","canTweet","computed","toString","send","push","__exports__"],"mappings":"+JAGA,MAAMA,EAAsB,YACtBC,EAAa,YAENC,EAAcC,UACzB,MAAM,QAAEC,GAAYC,iBACdC,EAASF,EAAQG,MAAMC,QAAQC,MAAMC,MAC3C,OAAOJ,GAIIK,EAAYR,MAAOS,EAAOC,KACrC,MAAM,OAAEC,EAAF,QAAUV,GAAYC,iBAGtBI,EAAQM,OAAKC,QAAQC,iBAGrBb,EAAQG,MAAMW,QAAQP,UAAUC,EAAOC,GAASM,SAAS,CAC7DC,OAAQN,EAAOP,MAAMc,UACrBZ,MAAOA,EAAMY,UACbC,cAAeP,OAAKQ,cAAcC,YACjCC,QAAQ,CAAChB,IAAQiB,IAAI,CAAE1B,sBAAqBC,eAG/C,MAAM0B,QAAqBvB,EAAQG,MAAMC,QAAQC,MAAMmB,MAAMnB,EAAMY,UAAW,UAC9E,MAAO,CAAEb,QAASmB,EAAcN,UAAWZ,EAAMY,Y,6JCvBnD,MAAM,OAACP,GAAUT,iBAEXC,EAASuB,eAAI,IACbC,EAAUD,gBAAI,GAEdjB,EAAQiB,eAAI,IACZhB,EAAUgB,eAAI,IAEpB3B,IAAc6B,KAAKC,GAAiB1B,EAAOC,MAAQyB,GAAeC,QAAQ,IAAMH,EAAQvB,OAAQ,GAEhG,MAAM2B,EAAWC,eAAS,IACjBrB,GAAUA,EAAOP,OAA+C,iDAAtCO,EAAOP,MAAMc,UAAUe,YAGpDC,EAAOlC,UACX,MAAMM,QAAcE,EAAUC,EAAML,MAAOM,EAAQN,OACnDK,EAAML,MAAQ,GACdM,EAAQN,MAAQ,GAChBD,EAAOC,MAAM+B,KAAK7B,I,8+BCpBpB,MAAM8B,EAAc,EAEL","file":"js/chunk-2d21a3d2.0b899651.js","sourcesContent":["import { web3 } from '@project-serum/anchor';\nimport { useWorkspace } from \"./workspace\";\n\nconst preflightCommitment = 'processed';\nconst commitment = 'processed';\n\nexport const fetchTweets = async () => {\n  const { program } = useWorkspace();\n  const tweets = program.value.account.tweet.all();\n  return tweets;\n};\n\n// 1. Define the sendTweet endpoint.\nexport const sendTweet = async (topic, content) => {\n  const { wallet, program } = useWorkspace();\n\n  // 2. Generate a new Keypair for our new tweet account.\n  const tweet = web3.Keypair.generate();\n\n  // 3. Send a \"SendTweet\" instruction with the right data and the right accounts.\n  await program.value.methods.sendTweet(topic, content).accounts({\n    author: wallet.value.publicKey, // author account public key\n    tweet: tweet.publicKey, // tweet account public key\n    systemProgram: web3.SystemProgram.programId, // system program id\n  }).signers([tweet]).rpc({ preflightCommitment, commitment });\n\n  // 4. Fetch the newly created account from the blockchain.\n  const tweetAccount = await program.value.account.tweet.fetch(tweet.publicKey, \"recent\");\n  return { account: tweetAccount, publicKey: tweet.publicKey };\n};","<script setup>\nimport {ref, computed} from \"vue\";\nimport {fetchTweets, sendTweet} from \"../tweets.js\";\nimport {useWorkspace} from \"@/workspace.js\";\n\nconst {wallet} = useWorkspace();\n\nconst tweets = ref([]);\nconst loading = ref(true);\n\nconst topic = ref(\"\");\nconst content = ref(\"\");\n\nfetchTweets().then(fetchedTweets => tweets.value = fetchedTweets).finally(() => loading.value = false);\n\nconst canTweet = computed(() => {\n  return wallet && wallet.value && wallet.value.publicKey.toString() === \"5bobMwjqaaydwBa3xSKLqLJjpZhJk11H3c8GtTcnsFca\";\n})\n\nconst send = async () => {\n  const tweet = await sendTweet(topic.value, content.value);\n  topic.value = \"\";\n  content.value = \"\";\n  tweets.value.push(tweet);\n}\n\n</script>\n\n\n<template>\n  <h1>Home</h1>\n  <div v-if=\"loading\">\n    Tweets loading\n  </div>\n  <div v-else>\n    <div class=\"flex flex-col\" v-if=\"canTweet\">\n      <input id=\"topic\" placeholder=\"topic\" v-model=\"topic\">\n      <textarea id=\"content\" placeholder=\"content\" v-model=\"content\"></textarea>\n      <button @click=\"send\">Submit</button>\n    </div>\n    Tweets loaded!\n    <div v-for=\"tweet in tweets\" :key=\"tweet.publicKey\" class=\"m-10\">\n      <div>Author: {{tweet.account.author.toBase58()}}</div>\n      <div>Topic: {{tweet.account.topic}}</div>\n      <div>Content: {{tweet.account.content}}</div>\n    </div>\n  </div>\n</template>\n","import script from \"./Home.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Home.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}